<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Lighting Bingo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  </head>
  <body class="container">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script
  src="https://code.jquery.com/jquery-3.7.1.min.js"
  integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
  crossorigin="anonymous"></script>





   
  <div class="row">
   
 
  <div class="col-4">
    <div class="card text-bg-info mb-3" style="max-width: 18rem;">
        <div class="card-header">Lighting Bingo</div>
        <div class="card-body">
          <h5 class="card-title"></h5>
          <p class="card-text"></p>
          <button class="btn btn-success" onclick="start()">Start</button>
          <button class="btn btn-danger" onclick="stop()">Stop</button>
        </div>
      </div>
    </div>
    <div class="col-4">
            <!-- Modal -->
<div class="modal fade modal-sm" id="numberModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content text-bg-info">
        <div class="modal-header">
          <h1 class="text-center fs-5" id="exampleModalLabel">Lighting Number</h1>
          <!--<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>-->
        </div>
        <div class="modal-body" id="modalCurrentCall">
          
        </div>
        <div class="">
         
        </div>
      </div>
    </div>
  </div>

    </div>
    <div class="col-4">
        <p class="title">Numbers:</p>
        <ul id="currentList" class="list-group" style="max-width: 200px;">
           
          </ul>
    </div>
   </div>
  


<script>
    let Interval = null;
    var numberList = [];
    function start()
    { 
        
         interval = setInterval(() => {
            
            
        if(numberList.length > 30){

            stop();
            
        }
            const randomInt= createRandomNumber(31);
            numberList.push(randomInt);
            
            show_modal(randomInt);
            setTimeout(function(){$('#numberModal').modal('hide')},2000);
            const node = document.createElement("li");
            const textnode = document.createTextNode(randomInt);
            
            node.appendChild(textnode);
            node.className = "list-group-item active";
            let l = document.getElementById("currentList");
            l.firstChild.className =  "list-group-item";
            l.prepend(node);
            
                }, 3000);


            }
        
    function stop(){
        // To stop the interval (e.g., when you no longer need it):
            clearInterval(interval);
    }


    function show_modal(lnumber){
        var notice = document.getElementById('modalCurrentCall');
        notice.innerHTML ="<div><h1 class='text-center fs-1 fw-bold'>" + lnumber +"</h1></div>";
        $('#numberModal').modal('show');
       
}   

function hide_modal(){
        $('#numberModal').modal('hide');
 
}   

function createRandomNumber(upto)
{
   
   do{
    dup = false;

    var newNumber = Math.floor(Math.random() * upto );

          
           for(var i = 0; i < numberList.length; i++ )
           {
                if(numberList[i] === newNumber)
                {
                    dup = true;
                }
           }
           if(numberList.length > upto -1)
           {dup = false;}
           console.log(numberList.length);
   } while (dup === true)
   return newNumber;
}
</script>
 

</body>

 
</html>

